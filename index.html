<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mat & M√•ltider ‚Äì Komplett Quiz (SRS) + Foton (varierade)</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f8fafc; color: #0f172a; margin:0; padding:0; }
    .wrap { max-width: 980px; margin: 0 auto; padding: 20px; }
    header { display:flex; justify-content: space-between; flex-wrap: wrap; align-items:center; gap:10px; }
    h1 { font-size: 1.5rem; margin:0; }
    .muted { font-size: 0.9rem; color:#64748b; }
    .card { background:#fff; border:1px solid #e2e8f0; border-radius:12px; margin-top:16px; }
    .card-content { padding:20px; }
    .qrow { display:flex; align-items:center; justify-content:center; gap:12px; min-height:120px; }
    .q { font-size:1.2rem; text-align:center; }
    .controls { display:flex; flex-wrap:wrap; gap:8px; justify-content:center; margin-top:14px; }
    button { border:none; border-radius:8px; padding:10px 14px; font-weight:bold; cursor:pointer; transition: transform 0.1s ease-in-out; }
    button:hover { transform: scale(1.05); }
    .btn { background:#2563eb; color:white; }
    .btn.outline { background:transparent; border:1px solid #2563eb; color:#2563eb; }
    .btn.ok { background:#16a34a; color:white; }
    .btn.bad { background:#ef4444; color:white; }
    .btn.reset { background:#facc15; color:#78350f; border:2px solid #ca8a04; }
    .progress { height:10px; border-radius:999px; background:#e5e7eb; overflow:hidden; }
    .bar { height:100%; width:0; background:#2563eb; transition:width 0.3s; }
    .stat { font-size:0.8rem; color:#64748b; margin-top:4px; }
    .badge { font-size:0.75rem; padding:2px 8px; border:1px solid #e2e8f0; border-radius:999px; color:#64748b; }
    .footer { text-align:center; font-size:0.8rem; color:#64748b; margin-top:20px; }
    .row { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .helpbox { margin-top:10px; font-size:0.9rem; color:#334155; background:#f1f5f9; border:1px solid #e2e8f0; border-radius:8px; padding:10px 12px; }
    .helpbox b { color:#111827; }
    .photo { width:72px; height:72px; object-fit:cover; border-radius:8px; border:1px solid #e2e8f0; box-shadow: 0 1px 1px rgba(0,0,0,0.06); }
    details { margin-top: 22px; }
    details summary { cursor: pointer; }
    .credits { font-size: 0.8rem; color:#64748b; }
    .credits a { color:#2563eb; text-decoration: none; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Mat & M√•ltider ‚Äì Komplett Quiz (SRS)</h1>
        <div class="muted">Inf√∂r prov: Again 10 min ¬∑ Hard 30 min ¬∑ Good 1‚Äì6h ¬∑ Easy 2‚Äì12h</div>
      </div>
      <div class="row">
        <label><input type="checkbox" id="examToggle" checked> Inf√∂r prov</label>
        <button class="btn outline" onclick="exportProgress()">‚¨áÔ∏è Exportera</button>
        <input type="file" id="importFile" accept="application/json" style="display:none;" />
        <button class="btn outline" onclick="document.getElementById('importFile').click()">‚¨ÜÔ∏è Importera</button>
      </div>
    </header>

    <div class="card"><div class="card-content">
      <div class="progress"><div id="bar" class="bar"></div></div>
      <div id="stats" class="stat">Laddar‚Ä¶</div>
      <div class="controls" style="margin-top:10px;">
        <button class="btn reset" onclick="resetAll()">üîÑ B√∂rja om</button>
      </div>
    </div></div>

    <div id="main"></div>

    <details>
      <summary>üì∏ Bildk√§llor (Public Domain/CC0)</summary>
      <div class="credits">
        ‚Ä¢ MyPlate (USDA, PD): <a href="https://commons.wikimedia.org/wiki/File:USDA_MyPlate_green.svg" target="_blank">USDA_MyPlate_green.svg</a><br>
        ‚Ä¢ Breakfast (USDA): <a href="https://commons.wikimedia.org/wiki/File:Breakfast_meal_-_MyPlate_20210810-FNS-UNC-0018.jpg" target="_blank">Breakfast meal ‚Äì MyPlate</a><br>
        ‚Ä¢ Measuring spoons (CC0): <a href="https://commons.wikimedia.org/wiki/File:Mongolian_Traditional_Culture_Measuring_Spoons_(35320951170).jpg" target="_blank">Measuring spoons</a><br>
        ‚Ä¢ Olive oil (PD/CC0): <a href="https://commons.wikimedia.org/wiki/File:Bottle_of_olive_oil.jpg" target="_blank">Bottle of olive oil</a><br>
        ‚Ä¢ Bread & grains (PD): <a href="https://commons.wikimedia.org/wiki/File:Bread_and_grains.jpg" target="_blank">Bread and grains</a><br>
        ‚Ä¢ Pasta (PD): <a href="https://commons.wikimedia.org/wiki/File:Cooked_pasta_noodles.jpg" target="_blank">Cooked pasta noodles</a><br>
        ‚Ä¢ Potatoes (PD): <a href="https://commons.wikimedia.org/wiki/File:Russet_potatoes.jpg" target="_blank">Russet potatoes</a><br>
        ‚Ä¢ Salmon (CC0): <a href="https://commons.wikimedia.org/wiki/File:Grilled_plated_salmon_fillet_(cropped).jpg" target="_blank">Grilled plated salmon fillet (cropped)</a><br>
        ‚Ä¢ Eggs (PD): <a href="https://commons.wikimedia.org/wiki/File:Chicken_eggs.jpg" target="_blank">Chicken eggs</a><br>
        ‚Ä¢ Beans/legumes (PD): <a href="https://commons.wikimedia.org/wiki/File:Legumes.jpg" target="_blank">Legumes</a><br>
        ‚Ä¢ Fruit & veg (PD, NCI/NIH): <a href="https://commons.wikimedia.org/wiki/File:Good_Food_In_Dishes_-_NCI_Visuals_Online.jpg" target="_blank">Good Food In Dishes</a><br>
        ‚Ä¢ Leafy greens (PD): <a href="https://commons.wikimedia.org/wiki/File:Kale-Bundle.jpg" target="_blank">Kale bundle</a><br>
        ‚Ä¢ Glass of water (PD): <a href="https://commons.wikimedia.org/wiki/File:Glass-of-water.jpg" target="_blank">Glass of water</a><br>
      </div>
    </details>

    <div class="footer">
      Tangenter: Mellanslag = v√§nd ¬∑ 1‚Äì4 = Again/Hard/Good/Easy ¬∑ Framsteg sparas p√• den h√§r datorn. <br/>
      <button class="btn reset" onclick="resetAll()">üîÑ B√∂rja om</button>
    </div>
  </div>

<script>
// Bildpooler (Wikimedia Commons Special:FilePath)
const POOL = {
  myplate: [
    "https://commons.wikimedia.org/wiki/Special:FilePath/USDA_MyPlate_green.svg"
  ],
  breakfast: [
    "https://commons.wikimedia.org/wiki/Special:FilePath/Breakfast_meal_-_MyPlate_20210810-FNS-UNC-0018.jpg"
  ],
  measure: [
    "https://commons.wikimedia.org/wiki/Special:FilePath/Mongolian_Traditional_Culture_Measuring_Spoons_%2835320951170%29.jpg"
  ],
  fats: [
    "https://commons.wikimedia.org/wiki/Special:FilePath/Bottle_of_olive_oil.jpg"
  ],
  carbs: [
    "https://commons.wikimedia.org/wiki/Special:FilePath/Bread_and_grains.jpg",
    "https://commons.wikimedia.org/wiki/Special:FilePath/Cooked_pasta_noodles.jpg",
    "https://commons.wikimedia.org/wiki/Special:FilePath/Russet_potatoes.jpg"
  ],
  protein: [
    "https://commons.wikimedia.org/wiki/Special:FilePath/Grilled_plated_salmon_fillet_%28cropped%29.jpg",
    "https://commons.wikimedia.org/wiki/Special:FilePath/Chicken_eggs.jpg",
    "https://commons.wikimedia.org/wiki/Special:FilePath/Legumes.jpg"
  ],
  vegfruit: [
    "https://commons.wikimedia.org/wiki/Special:FilePath/Good_Food_In_Dishes_-_NCI_Visuals_Online.jpg",
    "https://commons.wikimedia.org/wiki/Special:FilePath/Kale-Bundle.jpg"
  ],
  water: [
    "https://commons.wikimedia.org/wiki/Special:FilePath/Glass-of-water.jpg"
  ]
};

function topicFor(text){
  const t=(text||"").toLowerCase();
  if(t.includes("tallriksmodellen")) return "myplate";
  if(t.includes("frukost") || t.includes("mellanm√•l")) return "breakfast";
  if(t.includes("m√•tt") || t.includes("dl") || t.includes("msk") || t.includes("tsk") || t.includes("krm") || t.includes("liter")) return "measure";
  if(t.includes("fett") || t.includes("omega") || t.includes("olja")) return "fats";
  if(t.includes("kolhydrat") || t.includes("br√∂d") || t.includes("pasta") || t.includes("potatis") || t.includes("fullkorn")) return "carbs";
  if(t.includes("protein") || t.includes("fisk") || t.includes("√§gg") || t.includes("b√∂n") || t.includes("linser")) return "protein";
  if(t.includes("vitamin") || t.includes("gr√∂nsak") || t.includes("frukt") || t.includes("fiber") || t.includes("matcirkeln") || t.includes("klimatsmart") || t.includes("s√§song") || t.includes("n√§rodlat")) return "vegfruit";
  if(t.includes("vatten") || t.includes("dryck") || t.includes("glas")) return "water";
  return "vegfruit";
}

// Deterministiskt val: v√§lj index baserat p√• ID-siffra
function pickPhoto(topic, id){
  const pool = POOL[topic] || POOL.vegfruit;
  const num = parseInt((id||"").replace(/\D/g,'')) || 0;
  const idx = pool.length ? num % pool.length : 0;
  return pool[idx];
}

// Fr√•gor/Svar
const QA = [
  {q:"Beskriv en bra frukost och f√∂rklara hur du t√§nkt.",a:"Ex: gr√∂t + mj√∂lk + macka med √§gg, eller yoghurt + granola + b√§r. Ger kolhydrater (energi), protein/kalcium och vitaminer/fibrer."},
  {q:"Varf√∂r √§r det viktigt att √§ta regelbundet?",a:"Ger j√§mn energi och b√§ttre koncentration samt minskar s√∂tsug/sm√•√§tande."},
  {q:"F√∂rklara vilken mat de olika delarna i tallriksmodellen ska best√• av.",a:"Kolhydrater: potatis/ris/pasta/br√∂d. Protein: fisk/k√∂tt/√§gg/linser/b√∂nor. Gr√∂nsaker/rotfrukter: vitaminer och fibrer."},
  {q:"Vilka n√§rings√§mnen hittar vi i de tre delarna och deras funktion?",a:"Kolhydrater (energi), Protein (bygger/reparerar muskler/v√§vnader), Vitaminer/fibrer fr√•n gr√∂nsaker (h√§lsa/tarmar)."},
  {q:"Vad √§r skillnaden p√• m√§ttat och om√§ttat fett?",a:"Om√§ttat √§r nyttigare (rapsolja/olivolja/avokado/n√∂tter/fisk). M√§ttat b√∂r begr√§nsas (sm√∂r/gr√§dde/korv/bacon/bakverk)."},
  {q:"Ge exempel p√• mat med m√§ttat fett.",a:"Sm√∂r, gr√§dde, r√∂tt k√∂tt, korv, bacon, bakverk."},
  {q:"Ge exempel p√• mat med om√§ttat fett.",a:"Rapsolja, olivolja, avokado, n√∂tter/mandel, fet fisk som lax/sill."},
  {q:"Vilken hj√§lp har vi av matcirkeln n√§r vi planerar m√•ltider?",a:"Den visar sju grupper s√• vi f√•r variation ‚Äì vi b√∂r √§ta n√•got fr√•n varje grupp varje dag/vid varje m√•ltid. (De sju grupperna √§r: 1. Fisk, k√∂tt och √§gg. 2. Frukt & b√§r. 3. Gr√∂nsaker. 4. Potatis och rotfrukter. 5. Br√∂d, mj√∂l & gryn. 6. Matfett. 7. Mj√∂ljkprodukter.)"},
  {q:"Ber√§tta om l√•ngsamma och snabba kolhydrater.",a:"L√•ngsamma (fullkorn/rotfrukter) ger j√§mn energi och m√§ttnad. Snabba (vitt br√∂d/godis/l√§sk) ger snabb h√∂jning och kort m√§ttnad."},
  {q:"Varf√∂r √§r det b√§ttre att √§ta mer mat fr√•n v√§xtriket √§n djurriket?",a:"Klimatsmartare och ofta billigare; mycket fiber och nyttiga fetter. Minska m√§ttat fett och klimatp√•verkan."},
  {q:"Varf√∂r √§r n√§rodlade s√§songsfrukter och -gr√∂nsaker bra?",a:"Mindre transporter, mer smak/n√§ring n√§r de mognat i s√§song och ofta billigare."},
  {q:"Ge fem klimatsmarta mattips.",a:"1) √Ñt mindre k√∂tt, 2) √Ñt mer baljv√§xter, 3) √Ñt n√§rodlat i s√§song, 4) Ta hand om rester ‚Äì sl√§ng inte, 5) V√§lj Nyckelh√•let/eko n√§r m√∂jligt."},
  {q:"Vilka sju grupper ing√•r i matcirkeln?",a:"Frukt & b√§r; Gr√∂nsaker; Potatis & rotfrukter; Br√∂d/ris/pasta/gryn; Matfett; Mejeri; K√∂tt/fisk/√§gg & baljv√§xter."},
  {q:"Hur anv√§nds matcirkeln i praktiken?",a:"√Ñt n√•got fr√•n varje grupp varje dag och helst vid varje m√•ltid f√∂r variation."},
  {q:"Vad visar tallriksmodellen f√∂r lunch/middag?",a:"Balans mellan: Kolhydrater (potatis/ris/pasta/br√∂d) + Protein (fisk/k√∂tt/linser/√§gg) + Gr√∂nsaker (vitaminer/fibrer)."},
  {q:"Vilka √§r de tre energigivande n√§rings√§mnena?",a:"Protein, Fett och Kolhydrater."},
  {q:"Var finns protein och vad g√∂r det?",a:"B√∂nor/linser/√§gg/mj√∂lk/k√∂tt/fisk. Bygger kroppens muskler, senor, hud och celler."},
  {q:"Varf√∂r rekommenderas mer v√§xtprotein?",a:"B√§ttre f√∂r milj√∂n och ofta billigare; ger fiber och n√§ring."},
  {q:"Vad g√∂r fett i kroppen?",a:"Ger energi, skyddar organ, h√•ller oss varma och hj√§lper upptag av A, D, E, K."},
  {q:"Exempel p√• om√§ttat respektive m√§ttat fett.",a:"Om√§ttat: raps-/olivolja, avokado, n√∂tter, fisk. M√§ttat: sm√∂r, gr√§dde, r√∂tt k√∂tt, korv, bacon, bakverk."},
  {q:"Var finns kolhydrater och vilka tre typer finns?",a:"Pasta/ris/br√∂d/potatis. Typer: st√§rkelse, fibrer, sockerarter."},
  {q:"Varf√∂r v√§lja potatis/matvete ist√§llet f√∂r ris ibland?",a:"N√§rodlat kan ge l√§gre klimatp√•verkan och √§r ofta billigare."},
  {q:"Ge exempel p√• l√•ngsamma kolhydrater (fr√•n dokumentet).",a:"Fullkornsbr√∂d, hela korn och fr√∂n, fullkornspasta, rotfrukter."},
  {q:"Ge exempel p√• snabba kolhydrater (fr√•n dokumentet).",a:"Vitt br√∂d, bullar, kakor, processad snabbmat, godis och socker."},
  {q:"Vad f√•r vi fr√•n gr√∂nsaker och rotfrukter?",a:"Vitaminer och kostfibrer ‚Äì h√•ller oss friska/pigga och motverkar f√∂rstoppning."},
  {q:"Varf√∂r s√§songsv√§lja k√•l/rotfrukter vinter och gurka/jordgubbar sommar?",a:"S√§song ger mer smak, n√§ring, l√§gre energi√•tg√•ng och ofta l√§gre pris."},
  {q:"Vad betyder Nyckelh√•let och var kan du hitta det?",a:"Mindre socker/salt, mer fullkorn/fiber och nyttigare fett. Finns p√• gr√∂nsaker, oljor, mejeri, br√∂d, flingor och fisk."},
  {q:"N√§mn sex klimatsmarta mattips fr√•n materialet.",a:"1) √Ñt mindre k√∂tt, 2) Sl√§ng inte mat, 3) √Ñt mer frukt/gr√∂nt (n√§rodlat/s√§song eller fryst), 4) √Ñt mer baljv√§xter, 5) Minska on√∂dig mat, 6) V√§lj ekologiskt n√§r m√∂jligt."},
  {q:"Vad ska du komma ih√•g om dina matval?",a:"Regelbundet, varierat och balanserat ‚Äì t√§nk √§ven klimat och ekonomi. L√∂rdagsgodis/k√∂tt ibland √§r okej; sl√§ng inte mat."},
  {q:"Hur mycket rymmer 1 dl, 1 msk, 1 tsk, 1 krm?",a:"1 dl = 100 ml, 1 msk = 15 ml, 1 tsk = 5 ml, 1 krm = 1 ml."},
  {q:"Hur m√•nga deciliter g√•r det p√• en liter?",a:"10 dl."},
  {q:"Hur m√•nga teskedar g√•r det p√• en matsked?",a:"3 tsk per msk."},
  {q:"Hur m√•nga kryddm√•tt g√•r det p√• en tesked?",a:"5 krm per tsk."},
  {q:"Hur m√•nga matskedar f√•r plats i en deciliter?",a:"Cirka 6,7 msk."},
  {q:"Ungef√§r hur mycket vatten i ett vanligt dricksglas?",a:"Cirka 2 dl."},
  {q:"Varf√∂r anv√§nda riktiga m√•tt och inte bestickm√•tt?",a:"Exakta m√§ngder ‚Äì bestick varierar i storlek beroende p√• modell/design."},
  {q:"Ge tre exempel p√• bra frukostar fr√•n materialet.",a:"1) Gr√∂t + rivet √§pple + mj√∂lk + macka med √§gg. 2) Smoothie + kn√§ckemacka med ost/paprika. 3) Yoghurt + granola + b√§r."},
  {q:"Vilka delar bidrar frukosten med enligt materialet?",a:"Br√∂d/gr√∂t: kolhydrater; mj√∂lk/yoghurt: protein och kalcium; frukt/b√§r/gr√∂nt: vitaminer och fibrer. Tips: l√§gg till ett √§gg."},
];

// ====== SRS och lagring ======
const STORAGE="hemkunskap-srs-KOMPLETT-FOTO-VAR";
const now=()=>Date.now();
function defState(id){return {id,reps:0,due:now(),lapses:0};}
let deck=QA.map((q,i)=>{
  const id="q"+(i+1);
  const topic=topicFor(q.q);
  const photo=pickPhoto(topic,id);
  return {id, q:q.q, a:q.a, topic, photo, state:defState(id)};
});
const saved=localStorage.getItem(STORAGE);
if(saved){try{const p=JSON.parse(saved);const map=new Map(p.map(x=>[x.id,x]));deck=deck.map(b=>map.get(b.id)||b);}catch{}}
function save(){localStorage.setItem(STORAGE,JSON.stringify(deck));}

// Export/Import
function exportProgress(){
  const blob=new Blob([JSON.stringify(deck)],{type:"application/json"});
  const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download="progress.json";a.click();
}
document.getElementById('importFile').addEventListener('change',(e)=>{
  const f=e.target.files[0]; if(!f) return;
  const r=new FileReader();
  r.onload=()=>{try{const data=JSON.parse(r.result); if(!Array.isArray(data)) throw new Error("Fel format");
    deck=QA.map((q,i)=>{
      const id="q"+(i+1);
      const found=data.find(x=>x.id===id);
      if(found) return found;
      const topic=topicFor(q.q);
      const photo=pickPhoto(topic,id);
      return {id, q:q.q, a:q.a, topic, photo, state:defState(id)};
    }); save(); render(); alert("Import klar."); }catch(err){alert("Import misslyckades: "+err.message);} };
  r.readAsText(f);
});

// SRS
let examMode=true; document.getElementById('examToggle').onchange=(e)=>{examMode=e.target.checked; render();};
function gradeCard(s,g,exam){
  s={...s}; const m=(min)=>min*60000,h=(hr)=>hr*3600000;
  if(exam){
    if(g===1){s.reps=0;s.lapses++;s.due=now()+m(10);return s;}
    if(g===2){s.reps++;s.due=now()+m(30);return s;}
    if(g===3){s.reps++;s.due=now()+[h(1),h(3),h(6)][Math.min(s.reps-1,2)];return s;}
    if(g===4){s.reps++;s.due=now()+[h(2),h(6),h(12)][Math.min(s.reps-1,2)];return s;}
  }else{
    if(g===1){s.reps=0;s.lapses++;s.due=now()+m(30);return s;}
    s.reps++;s.due=now()+86400000*Math.max(1,s.reps);return s;
  }
  return s;
}
function pool(){return deck.filter(d=>d.state.due<=now()).concat(deck.filter(d=>d.state.reps===0).slice(0,14));}
function stats(){
  const poolNow=pool();
  document.getElementById('bar').style.width=(100*(deck.length-poolNow.length)/deck.length)+'%';
  document.getElementById('stats').textContent=`Klar nu: ${deck.length-poolNow.length}/${deck.length} ¬∑ F√∂rfallna: ${poolNow.length}`;
}
function renderEmpty(){
  const el=document.getElementById('main');
  el.innerHTML='<div class="card"><div class="card-content center"><h3>Inga fler kort üéâ</h3><p class="muted">Bra jobbat!</p><div class="controls"><button class="btn" onclick="location.reload()">Uppdatera</button><button class="btn reset" onclick="resetAll()">üîÑ B√∂rja om</button></div><div class="helpbox"><b>Vad betyder knapparna?</b><br>Again = 10 min ‚Ä¢ Hard = 30 min ‚Ä¢ Good = 1‚Äì6 h ‚Ä¢ Easy = 2‚Äì12 h</div></div></div>';
}
function render(){
  stats(); const c=pool()[0]; const el=document.getElementById('main');
  if(!c) return renderEmpty();
  el.innerHTML=`<div class="card"><div class="card-content">
    <div style="display:flex;justify-content:space-between">
      <span class="badge">F√∂rfaller: ${Math.max(0, Math.round((c.state.due-now())/60000))} min</span>
      <span class="muted">Rep ${c.state.reps} ¬∑ Lapses ${c.state.lapses}</span>
    </div>
    <div class="qrow">
      <img src="${c.photo}" alt="Illustrationsfoto" class="photo" referrerpolicy="no-referrer">
      <div class="q" id="qa">${c.q}</div>
    </div>
    <div class="controls"><button class="btn outline" onclick="flip()">V√§nd</button></div>
    <div class="controls">
      <button class="btn bad" onclick="grade(1)">1 Again</button>
      <button class="btn outline" onclick="grade(2)">2 Hard</button>
      <button class="btn" onclick="grade(3)">3 Good</button>
      <button class="btn ok" onclick="grade(4)">4 Easy</button>
    </div>
    <div class="helpbox"><b>Vad betyder knapparna?</b><br>
      <b>Again</b> = repetera om <b>10 min</b> (beh√∂ver √∂vas direkt).<br>
      <b>Hard</b> = repetera om <b>30 min</b> (sv√•rt, snart igen).<br>
      <b>Good</b> = repetera om <b>1‚Äì6 timmar</b> (sitter ganska bra).<br>
      <b>Easy</b> = repetera om <b>2‚Äì12 timmar</b> (k√§nns l√§tt nu).
    </div>
  </div></div>`;
  window._cid=c.id; window._showA=false;
}
function flip(){ const c=deck.find(x=>x.id===window._cid); if(!c)return;
  const el=document.getElementById('qa'); if(window._showA){el.textContent=c.q;window._showA=false;} else {el.textContent=c.a;window._showA=true;} }
function grade(g){ const i=deck.findIndex(x=>x.id===window._cid); if(i<0)return; deck[i]={...deck[i],state:gradeCard(deck[i].state,g,examMode)}; save(); render(); }
function resetAll(){ if(confirm('Nollst√§ll allt?')){ deck=QA.map((q,i)=>{ const id="q"+(i+1); const topic=topicFor(q.q); const photo=pickPhoto(topic,id); return {id, q:q.q, a:q.a, topic, photo, state:defState(id)}; }); save(); render(); } }

window.onkeydown=(e)=>{ if(e.code==='Space'){e.preventDefault();flip();} if(e.key==='1')grade(1); if(e.key==='2')grade(2); if(e.key==='3')grade(3); if(e.key==='4')grade(4); };
render();
</script>
</body>
</html>

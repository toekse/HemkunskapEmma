<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Interaktivt pluggsätt – Mat & Måltider åk 6</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f9fafb; margin: 0; padding: 20px; }
    h1 { text-align: center; }
    .card { background: white; border-radius: 12px; padding: 20px; margin: 20px auto; max-width: 700px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .controls { display: flex; justify-content: center; gap: 10px; margin-top: 10px; flex-wrap: wrap;}
    button { padding: 8px 16px; border: none; border-radius: 8px; cursor: pointer; background: #2563eb; color: white; font-size: 14px; }
    button.outline { background: white; color: #2563eb; border: 1px solid #2563eb; }
    .progress { height: 10px; background: #e5e7eb; border-radius: 5px; overflow: hidden; margin: 10px 0; }
    .progress-bar { height: 10px; background: #2563eb; width: 0; transition: width 0.3s; }
    .options { display: grid; gap: 8px; margin-top: 10px; }
    .option { padding: 10px; border-radius: 8px; border: 1px solid #ccc; cursor: pointer; background: white; }
    .option.correct { background: #bbf7d0; border-color: #22c55e; }
    .option.wrong { background: #fecaca; border-color: #ef4444; }
  </style>
</head>
<body>
  <h1>Interaktivt pluggsätt – Mat & Måltider (åk 6)</h1>
  <div class="progress"><div id="progress-bar" class="progress-bar"></div></div>
  <div id="mode-switch" class="controls">
    <button onclick="setMode('flash')">Flashcards</button>
    <button onclick="setMode('quiz')">Quiz</button>
  </div>
  <div id="app"></div>

<script>
const QA = [
  {q: "Beskriv en bra frukost och förklara varför.", a: "T.ex. yoghurt med müsli och frukt eller grovt bröd med pålägg. Innehåller kolhydrater (energi), protein (bygger kroppen) och vitaminer/mineraler."},
  {q: "Varför är det viktigt att äta regelbundet?", a: "Ger jämn energi, bättre koncentration och minskar risken att småäta onyttigt."},
  {q: "Vilka tre delar består tallriksmodellen av?", a: "Kolhydrater, grönsaker/frukt och protein."},
  {q: "Vad ger kolhydrater kroppen?", a: "Energi."},
  {q: "Vad har protein för funktion i kroppen?", a: "Bygger upp och reparerar kroppen."},
  {q: "Varför behöver vi fett?", a: "Ger energi, bygger celler, skyddar organ."},
  {q: "Vad gör vitaminer och mineraler i kroppen?", a: "Stärker immunförsvaret, behövs för blod, skelett och andra funktioner."},
  {q: "Vad gör fibrer?", a: "Bra för magen, håller blodsockret jämnt."},
  {q: "Vad är skillnaden på mättat och omättat fett?", a: "Mättat fett (smör, bacon, ost) är mindre nyttigt, omättat fett (olja, avokado, fisk, nötter) är bra för hjärtat."},
  {q: "Vad hjälper matcirkeln oss med?", a: "Att planera måltider och få i oss alla näringsämnen."},
  {q: "Ge exempel på snabba kolhydrater.", a: "Vitt bröd, godis, läsk."},
  {q: "Ge exempel på långsamma kolhydrater.", a: "Grovt bröd, fullkornspasta, baljväxter."},
  {q: "Varför är det bättre att äta mer från växtriket än djurriket?", a: "Växtriket (bönor, linser) är nyttigt och klimatsmart, djurriket (kött, ost) har ofta mer mättat fett och större klimatpåverkan."},
  {q: "Varför är det bra att äta närodlade och säsongsanpassade råvaror?", a: "Mindre transporter, bättre för miljön, billigare, färskare och godare."},
  {q: "Nämn 5 klimatsmarta mattips.", a: "Ät mer vegetariskt, välj säsongsanpassat, välj närodlat, ta hand om rester, drick vatten istället för läsk."},
  {q: "Vilka är bra måltidsvanor?", a: "Ät frukost, lunch, middag och mellanmål, drick vatten, ät varierat och lagom stora portioner, ha trevliga måltider."},
  {q: "Varför är bra mat viktigt för hälsan?", a: "Ger energi, koncentration, ork och minskar risken för sjukdomar."}
];

let index = 0;
let flipped = false;
let learned = Array(QA.length).fill(false);
let mode = 'flash';
let quizItems = [];
let quizStep = 0;
let quizScore = 0;

function updateProgress() {
  const done = learned.filter(x=>x).length;
  const pct = Math.round((done/QA.length)*100);
  document.getElementById('progress-bar').style.width = pct + '%';
}

function renderFlash() {
  const card = QA[index];
  const app = document.getElementById('app');
  app.innerHTML = `<div class='card'><div><strong>Kort ${index+1}/${QA.length}</strong></div><div style='min-height:120px;margin:20px 0;font-size:18px;text-align:center;'>${flipped ? card.a : card.q}</div><div class='controls'><button onclick='flip()'>Vänd</button><button class='outline' onclick='prev()'>Föregående</button><button class='outline' onclick='next()'>Nästa</button></div><div class='controls'><button onclick='mark(false)' class='outline'>Öva mer</button><button onclick='mark(true)'>Kan det</button></div></div>`;
}

function renderQuiz() {
  if (quizStep >= quizItems.length) {
    document.getElementById('app').innerHTML = `<div class='card'><h3>Quiz klart!</h3><p>Poäng: ${quizScore}/${quizItems.length}</p><div class='controls'><button onclick='startQuiz()'>Starta om</button></div></div>`;
    return;
  }
  const item = quizItems[quizStep];
  let html = `<div class='card'><div><strong>Fråga ${quizStep+1}/${quizItems.length}</strong></div><p style='margin:20px 0;font-size:18px;'>${item.q}</p><div class='options'>`;
  item.options.forEach(opt => {
    html += `<div class='option' onclick='answer("${opt.replace(/"/g, '&quot;')}")'>${opt}</div>`;
  });
  html += `</div></div>`;
  document.getElementById('app').innerHTML = html;
}

function flip(){ flipped = !flipped; renderFlash(); }
function next(){ index = (index+1) % QA.length; flipped=false; renderFlash(); }
function prev(){ index = (index-1+QA.length) % QA.length; flipped=false; renderFlash(); }
function mark(val){ learned[index]=val; next(); updateProgress(); }

function setMode(m){ mode=m; if(m==='flash'){ renderFlash(); } else { startQuiz(); } }

function startQuiz(){
  quizItems = QA.map((x,i)=>({q:x.q, correct:x.a, options:[] }));
  quizItems.forEach(item=>{ let opts=[item.correct]; while(opts.length<4){ const cand=QA[Math.floor(Math.random()*QA.length)].a; if(!opts.includes(cand)) opts.push(cand);} item.options=opts.sort(()=>Math.random()-0.5); });
  quizItems=quizItems.sort(()=>Math.random()-0.5).slice(0,10);
  quizStep=0; quizScore=0; renderQuiz();
}

function answer(opt){
  const item = quizItems[quizStep];
  const options = document.querySelectorAll('.option');
  options.forEach(el=>{
    if(el.textContent===item.correct){ el.classList.add('correct'); }
    if(el.textContent===opt && opt!==item.correct){ el.classList.add('wrong'); }
    el.style.pointerEvents='none';
  });
  if(opt===item.correct) quizScore++;
  setTimeout(()=>{ quizStep++; renderQuiz(); }, 1000);
}

updateProgress();
setMode('flash');
</script>
</body>
</html>